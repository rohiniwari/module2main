<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- navbar -->
     <h2>FLEET MANAGEMENT APP</h2>
     <select id="filterCategory">
        <option value="ALL">All</option>
        <option value="Auto">Auto</option>
        <option value="Truck">Truck</option>
        <option value="Car">Car</option>
        <option value="Bus">Bus</option>
     </select>
     <label>Availability:</label>
     <select id="filterAvailability">
        <option value="ALL">All</option>
        <option value="Available">Available</option>
        <option value="Unavailable">Unavailable</option>
        </select>
<button id="clearFilters">Clear Filters</button>
   
<hr>

<!-- sidebar -->
 <h3>Add Fleet</h3>
 <form id ="fleetForm">
    <label>Reg No:</label>
    <br>
    <input type="text" id="regNo"><br><br>

    <label>Category:</label>
    <br>
    <select id="category">
       
        <option >Auto</option>
        <option >Truck</option>
        <option >Car</option>
        <option >Bus</option>
     </select> <br>
     <br>
     <label>Driver:</label>
     <br>
     <input type="text" id="driver"><br><br>
     <label>Availability:</label><br>
      <select id="isAvailable">
        <option >Available</option>
        <option >Unavailable</option>
      
     </select>
     <br>
     <br>
     <button type="submit">Add Fleet</button>
 </form>
<hr>

<!-- Main area -->
 <div id="cardsContainer"></div>
 <script>
    let fleets = [];
    const SAMPLE_IMG ="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png";

    document.getElementById("fleetForm").addEventListener("submit" , function(e){
        e.preventDefault();
        let regNo = document.getElementById("regNo").value.trim();
        let category = document.getElementById("category").value;
        let driver = document.getElementById("driver").value.trim();
        let availability = document.getElementById("isAvailable").value;
        if (regNo === "" || driver === ""){
            alert("All fields required");
            return;
        }
        fleets.push({
            id:Date.now(),
            regNo,
            category,
            driver,
            availability
        });
        document.getElementById("fleetForm").reset();
        renderCards();
    });

    function renderCards(){
        let container = document.getElementById("cardsContainer");
        container.innerHTML = "";

        let fCat = document.getElementById("filterCategory").value;
        let fAvail = document.getElementById("filterAvailability").value;

        let data = fleets.filter(v=>{
            if(fCat !== "ALL" && v.category !== fCat)
            return false;
         if(fAvail !== "ALL" && v.availability !== fAvail)
            return false;
        return true;
        })

        data.forEach(v=>{
            let card = document.createElement("div");
            card.style.border = "1px solid black";
            card.style.padding = "10px";
            card.style.margin = "10px 0";
            card.innerHTML = `
            <img src="${SAMPLE_IMG}" width="200"><br>
            <p><b>Reg:</b> ${v.regNo}</p>
             <p><b>Category:</b> ${v.category}</p>
              <p><b>Driver:</b> <span id="d-${v.id}">${v.driver}</span></p>
               <p><b>Availability:</b><span id="a-${v.id}">${v.availability}</span></p>
            `;
            let btn1 = document.createElement("button");
            btn1.innerText = "Update Driver";
            btn1.onclick = function(){
                updateDriver(v.id);};

                let btn2 = document.createElement("button");
            btn2.innerText = "Change Availability";
            btn2.onclick = function(){
                toggleAvailability(v.id);};

                let btn3 = document.createElement("button");
            btn3.innerText = "Delete";
            btn3.onclick = function(){
                deleteVehicle(v.id);};
            
                card.append(btn1, btn2, btn3);
                container.appendChild(card);
        })
    }

    // UPDATE DRIVER
function updateDriver(id){
    let newName = prompt("Enter new driver name:");
    if(newName === null) return;
    if(newName.trim() === ""){
        alert("Driver name cannot be empty");
        return;
    }

    let obj = fleets.find(v=>v.id === id);
    obj.driver = newName;
    renderCards();
}

// TOGGLE AVAILABILITY
function toggleAvailability(id){
    let obj = fleets.find(v=>v.id === id);
    obj.availability = obj.availability === "Available" ? "Unavailable" : "Available";
    renderCards();
}

// DELETE
function deleteVehicle(id){
    if(confirm("Are you sure?")){
        fleets = fleets.filter(v=>v.id !== id);
        renderCards();
    }
}

// FILTER EVENTS
document.getElementById("filterCategory").onchange = renderCards;
document.getElementById("filterAvailability").onchange = renderCards;

document.getElementById("clearFilters").onclick = function(){
    document.getElementById("filterCategory").value = "ALL";
    document.getElementById("filterAvailability").value = "ALL";
    renderCards();
}

 </script>
</body>
</html>